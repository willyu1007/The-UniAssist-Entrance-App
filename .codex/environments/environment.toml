version = 1
name = "The-UA-Entrance-APP"

[setup]
script = "pnpm install --frozen-lockfile"

[[actions]]
name = "Run"
icon = "run"
command = '''
export EXPO_PUBLIC_GATEWAY_BASE_URL=http://localhost:8787
export UNIASSIST_PLAN_PROVIDER_BASE_URL=http://localhost:8890
(pnpm dev:provider-plan & pnpm dev:gateway & pnpm --filter @baseinterface/frontend web & wait)
'''

[[actions]]
name = "Stop"
icon = "debug"
command = '''
pkill -f "pnpm dev:provider-plan" || true
pkill -f "pnpm dev:gateway" || true
pkill -f "pnpm --filter @baseinterface/frontend web" || true
pkill -f "expo start --web" || true
(lsof -ti tcp:8787 | xargs kill -TERM) 2>/dev/null || true
(lsof -ti tcp:8890 | xargs kill -TERM) 2>/dev/null || true
(lsof -ti tcp:8081 | xargs kill -TERM) 2>/dev/null || true
(lsof -ti tcp:19006 | xargs kill -TERM) 2>/dev/null || true
echo "Stopped UA Entrance Run action processes (if running)."
'''
